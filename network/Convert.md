# 4장

---

## 4.1 디지털 - 대 디지털 변환

---

디지털 신호를 이용해 디지털 데이터를 표현하는 방법에는 3가지 변환 기술이 있다.

**_회선 부호화, 블록 부호화, 뒤섞기_**가 그것들이다.

**회선 부호화**는 항상 필요하며, 블록 부호화와 뒤섞기는 필요하지 않을 수도 있다.

### 4.1.1 회선 부호화

---

- 디지털 데이터를 디지털 신호로 바꾸는 작업
  - 회선 부호화와 복호화

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/a5124510-d075-4e2c-ac1b-907f024427e0)

- 신호 요소 대 데이터 요소
  - 신호 요소 : 디지털 신호의 가장 짧은 단위 (전달자)
  - 데이터 요소 : 데이터를 나타내는 가장 작은 단위체, 비트(bit)

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/79ccf4e7-3b07-4199-80f9-680fd05b155c)

- 데이터 전송률 대 신호 전송률
  - 데이터 전송률 (data rate)
    - 1초당 전송된 데이터 요소의 개수 (단위는 초당 비트수 -bps), 비트율 이라고도 함
  - 신호 전송률 (signaml rate)
    - 1초당 전송된 신호 요소의 개수 (단위는 보오 - baud) , 펄스율, 변조율, 보오율 이라고도 함
  - **_데이터 통신의 목적은 신호 전송률을 낮추면서 데이터 전송률을 높이는 것이다._**
  - 데이터 전송률 (N) 과 신호 전송률 (S)의 관계
    ![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/df422bfa-0582-4666-a86d-208e5c7c216e)

### 예제 4.1

한 개의 신호 요소에 한 개의 데이터 요소를 전달하고 있다 (r = 1). 비트율이 100kbps이고, c가 0과 1사이의 값이라면 보오율은?

**_Solution_**

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/118f866b-d406-4d07-952d-e0b8cd11c0dc)

## 회선 부호화 오류

---

- 기준선 표류
  - 디지털 신호의 복호화 시 수신된 신호 세기의 평균을 측정하며 이 평균치를 **기준선** 이라 함
  - 수신되는 신호의 세기는 이 기준선에 비교하여 데이터 요소의 값을 결정
  - 오래 지속되는 0이나 1과 같은 신호는 이 기준선을 표류시킬 수 있으며 이는 복호화 오류를 야기
- 직류 성분
  - 디지털 신호의 전압이 한동안 일정하게 유지되면 스펙트럼은 매우 낮은 주파수를 만들어냄
  - 이와 같이 0 주파수 주위에 생기는 주파수가 직류 성분.
  - 이는 저주파 성분을 통과 시키지 못함
- 자기 동기화
  - 수신 신호의 복호시 수신 비트 간격은 발신 비트 간격과 완전하게 일치해야 한다.
  - 송수신 동기가 일치하지 않으면 수신자는 발신 비트를 다르게 인식할 수 있다.
  - 자기 동기화 디지털 신호는 전송되는 데이터 안에 타이밍 정보를 포함한다.
  - 자기 동기화 결핍 효과

### 4.1.2 회선 부호화 방식

---

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/caeb80ea-143c-4f58-8029-5d62fd140bc3)

회선 부호화 방식은 크게 5가지가 있다.

- 단극형
  - 시간 축을 기준으로 전부 위 또는 아래 신호 준위의 값 이용
- 극형
  - 전압은 시간 축의 양측 사용. 0에 대한 전압 준위는 양, 1에 대한 전압 준위는 음을 사용
- 양극형
  - 양, 음 및 영의 세가지 전압 준위 사용. 전압 준위 0은 하나의 데이터 요소, 양 전압과 음 전압은 교대로 사용되어 다른 하나의 데이터 요소 표현
- 다준위
  - L개의 서로 다른 준위를 사용해 L^n 개의 신호 요소를 만든다
- 다중 회선
  - 2개 보다 많은 준위의 신호를 사용해 2개 이상의 규칙을 갖는 차분 방식의 부호화, MLT-3 (다중 회선 전송 3준위)

### 단극형 비영복귀 (NRZ)

---

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/f63643b5-18d2-4fd9-8a2f-b1965afa15a4)

NRZ : Non-return to zero( 비영복귀 )

- 신호 준위가 양 전압일 때 비트 1, 음 전압일 때 비트 0
- 부호화 신호의 준위는 항상 양 또는 음이며, 0이 되지 않으므로 NRZ
- 정규화된 전력이 극형 NRZ에 비해 2배 → **사용되지 않음**

### 극형

---

- 양과 음의 두 가지 전압 준위를 사용
- 회선의 평균 전압 준위 감소
- 직류 성분 문제의 완화

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/50f69228-e264-4c8d-ab72-a754db7c036f)

### 극형 비영복귀 (Polar NRZ)

---

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/f64f6c7d-47ed-4a3b-a7c4-b4bfcdc1b5fc)

**→ 0으로 돌아가지 않는다**

- NRZ-L(evel)
  - 양 전압은 0, 음 전압은 비트 1을 위미
  - 긴 스트림의 데이터를 수신하면 송신자와 클록 동기화 여부가 불투명하다.
- NRZ-I(nvert)
  - 전압 준위의 반전이 비트 1을 의미
  - 전압의 변화시 비트 1, 변화가 없으면 비트 0으로 표현
  - 비트 1을 만날 때 마다 신호과 변화하기 때문에 **동기화를 제공**

### _NRZ-L과 NRZ-I 는 둘 다 직류 성분 문제를 갖는다_

### 극형 영복귀 (Polar RZ)

---

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/56719c6c-1396-43d2-bb9e-1cfad3f0708a)

**NRZ의 문제 : 송신과 수신 사이에 동기화가 되지 않을 때, 비트의 종료와 시작을 알 수 없다**

- 영복귀 (RZ)
  - 양, 음 0의 세 가지 값을 사용, 신호는 매 비트 구간에 바뀐다. 즉, 비트 간격의 반이 지나고 나면 0으로 돌아온다.
  - 비트 1:0 에 대한 양으로 표현, 비트 0:0에 대한 음으로 표현 → ??? 이해 불가

단점 : 한 비트를 부호화하기 위해 두 번의 신호 변화가 필요하기 때문에 **많은 대역폭**을 차지한다. 잘 사용되지 않는다.

### 이상 : 맨체스터와 차분 맨체스터

---

- 맨체스터
  - 동기화를 달성하는 동시에 해당 비트를 표현하기 위해 각 비트 간격 중간에서 신호를 반전
  - 비트 1 : 음-대-양 전이
  - 비트 0 :양-대-음 전이
  - 두 가지 전이를 통해 RZ와 같은 수준의 동기화를 달성한다.
- 차분 맨체스터 부호화
  - 비트 간격 중간에서의 반전은 동기화를 위해 사용한다.
  - 비트 간격 시작점에서의 전이 여부로 비트를 식별한다.
  - 비트 0 : 비트 시작점에서 전이가 있을 경우 (2 번의 신호 변화)
  - 비트 1 : 비트 시작점에서 전이가 없을 경우 (1번의 신호 변화)

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/9e6e5715-6992-4922-a769-d72fcd5bdc9f)

**→ 맨체스터와 차분 맨체스터 부호화 에서 비트 중간에서의 반전은 동기화를 위해 사용되며, 대역폭은 NRZ의 2배이다.**

### 양극형 (Bipolar) - AMI와 가삼진수

---

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/936690d8-a155-4a40-a374-2037e89d4b7c)

- **AMI : 교대로 나타내는 반전되는 1**
  - 비트 0 : 중립의 0 전압
  - 비트 1: 교대되는 양과 음의 전압
  - 장거리 통신에 사용되나 연속된 0이 길게 지속될 경우 동기화 문제 발생
- 가 삼진수
  - 비트 1 : 전압 준위 0
  - 비트 0 : 양 전압과 음 전압의 교대

### 다준위 방식

---

- n개의 신호 요소 패턴을 사용해 m개의 데이터 요소 패턴을 표현하며, **단위 보오 당 비트 수 증가**
- mBnL 부호화
  - m : 2진수 패턴의 길이
  - B : 2진수
  - n : 신호 패턴의 길이
  - L : 신호 준위의 수, 숫자대신 문자 사용
    - 2진 : B
    - 3진 : T
    - 4진 Q

**_mBnL 방식에서는, m개의 데이터 요소의 패턴이 2^m ← L^n 가 되는 n개의 신호 패턴으로 부호하된다._**

### 다준위 방식 : 2B1Q

---

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/f0bed6a8-5a6f-44e4-bcd5-182567e92d48)

- 2B1Q
  - 2개의 비트 패턴을 4개의 전압 준위 중 각각으로 부호화
  - DSL에서 기술에서 가입자 전화 회선을 사용하는 고속 인터넷 접속 제공에 사용
  - Rules
    - -3 → 00
    - -1 → 01
    - +3 → 10
    - +1 → 11

### 다준위 방식 : 8B6T

---

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/7409fefa-fc66-4737-b8d6-70ace03633c2)

- 8B6T
  - 8비트 패턴을 6개의 신호 요소로 나타내는 것으로 신호는 3개의 준위를 갖는다.
  - 2^8 = 256 개의 데이터 패턴과 3^6 = 729 개의 신호 패턴을 가진다.
  - 사용되지 않는 신호 패턴은 동기화나 오류 검색에 사용한다.
  - 100Base-4T 케이블에서 사용한다.
  ### 다준위 방식 : 4D-PAM5
  ***
  ![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/0bb12eb1-1c09-4ad8-ac25-24d23cd274bc)
  - 4D-PAM5 (4차원 5준위 펄스 진폭 변조)
    - 4D : 데이터가 4개의 회선으로 동시에 전송
    - 5개의 준위 : -2, -1, 0, 1, 2(0은 오류 검색에 사용)
    - 1G bps LAN에 사용 (동축 케이블)
  ### 다중 회선 전송 : MLT-3
  ***
  ![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/d91c3614-69e5-4324-81eb-99d577cd7b78)
  **_왜 MLT-3 인가?_**
  - MLT-3 방식의 신호 모양이 요구 대역폭을 줄인다
    - 신호 패턴인 +V0 -V0 이 매 4비트마다 반복된다.
    - 구리선(동축 케이블)에 100Mbps의 데이터 전송이 가능한 방식이다. (LAN)

## 4-2 아날로그-대 디지털 변환

---

오늘날의 추세는 음성이나 카메라 등의 아날로그 신호를 디지털 데이터로 바꾸는 것이다.

아날로그 데이터를 디지털 데이터로 바꾸는 두 가지 방법은 **PCM ( pulse code modulation )**과 **DM(delta modulation)** 이다.

### 4.2.1 펄스 코드 변조 ( Pulse Code Modulation)

---

- 펄스 코드 변조 (PCM)
  - 아날로그 신호를 디지털 데이터로 바꾸기 위해 널리 사용되는 기법이다.
    1. Sampling(채집): 아날로그 신호를 채집
    2. Quantization(계수화) : 채집된 신호를 정수값으로 계수화
    3. Encoding(부호화) : 계수화된 값을 비트 스트림으로 부호화

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/cf1f001b-ef11-4570-b8e4-af774180ecf8)(4%E1%84%8C%E1%85%A1%E1%86%BC%2058be8e833be049f2a05c8b118306e74b/Untitled%2015.png)

### 채집 (Sampling)

---

채집은 아날로그 신호를 수집하는 과정이다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/009f9e7e-a72d-4ca0-86f6-7d4d52546949)

나이퀴스트 정리에 의하면, 채집율은 신호에 포함된 최대 주파수의 최소한 두 배가 되어야 한다.

이를 직관적으로 이해하기 위해 단순 정현파를 3가지 채집율로 채집해보자.

각각 4f (나이퀴스트율의 2배) , 2f(나이퀴스트 율), f (나이퀴스트 율의 절반) 으로 채집해보겠다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/ab8972b1-1974-4def-966e-83f0c54bead1)

1. a의 경우 나이퀴스트 율로 채집했다. 원래의 정현파에 근사한 결과를 얻는다
2. b의 경우 나이퀴스트 율의 2배를 채집했다. 나이퀴스트율로 채집했을때와 마찬가지로 근사한 결과를 얻지만 불필요하다.
3. c처럼 나이퀴스트 율의 절반으로 채집했을 때는 원래의 신호를 바로 재생하지 못한다.

**예제 4.8 , 4.9**

채집의 예로 영화에서 앞으로 가는 자동차의 바퀴가 뒤로 돌고있는것 같은 화면을 들 수 있다.

영화는 초당 24 프레임이 돌아간다. 만약 바퀴는 매 초 12번 이상의 속도로 돈다고 가정하면, 이보다 낮은속도로 신호를 채집하면 뒤로 돌고있는 느낌을 받는것이다.

### 계수화 (Quantization)

---

채집으로 얻은 것은 신호의 최대 진폭과 최소 진폭 사이의 값들이다.

이 값들은 정수가 아니고, 부호화 과정에서 사용될 수 없다.

1. 원래의 아날로그 신호는 Vmin과 Vmax 사이의 진폭값을 순간적으로 갖는다고 가정하자.
2. 전체 영역을 각각 높이 델타의 L개 구간으로 나눈다

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/3a465cc8-806d-4d12-9f63-c1ef6087da9d)

1. 각 구간의 중간점에 0부터 L - 1까지의 계수화된 값을 지정
2. 채집된 신호의 진폭값을 계수화된 값의 근사값으로 지정

### 채집된 신호의 계수화와 부호화

---

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/a17dd5f8-60f8-4613-83cf-222595d00cf6)

위 그림에서 Vmax = 20, Vmin = -20, L = 8이라고 가정했다.

전체 영역을 L값인 8개의 구간으로 나눴다.

각 구간의 중간점에 0부터 8 - 1까지의 계수화된 값을 지정했다. 좌상단의 `Quantization codes` 이다.

채집된 신호의 진폭값을 계수화된 값의 근사값으로 지정한다.

### 계수화 준위

---

구간의 개수, 준위의 개수는 아날로그 신호의 진폭 구간과 얼마나 정확하게 신호를 복구하는 가에 달려있다.

**음성을 디지털 화 하는 경우, L은 통산 256이다.**

낮은 값일 경우 신호의 진폭 변동이 많아져 계수화 오차가 커진다.

### 계수화 오차

---

계수화는 근사값을 만드는 과정이다. 입력은 실제 값이나 출력은 근사값이다.(구역의 중간값)

신호의 SNR 을 바꾸며, 이는 전송대역 상한을 줄인다는 것을 의미한다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/31b52f04-2654-4659-8670-13749ca87a03)

위 공식에서 nb는 표본 당 비트 수 이다.

**예제 4.13**

전화 가입자 회선은 SNRdB의 값이 40이 넘어야 한다. 채집당 최소 비트 수는 얼마인가?

**_Solution_**

비트 수는 아래와 같다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/62eac0c3-4331-45ab-8480-75b7c7762e2d)

최소 6.35개 이상의 비트를 채집해야 하므로 전화회사는 항상 채집 당 7 또는 8비트를 할당한다.

### 부호화 (Encoding)

---

각 표본이 계수화되고 표본당 비트수가 정해진 후, 각 표본이 nb비트의 부호로 바뀌는 것.

계수화 준위 개수가 L이면 비트 수는 **nb = log2L**

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/6298e0b0-af67-4034-bc76-dd5f8d8f2ff8)

**예제 4.14**

사람의 목소리를 디지털화 하고자 한다. 채집 당 8비트를 가정하면 비트율은?

**_Solution_**

채집률은 2f이다. 사람의 목소리는 보통 0 ~ 4000Hz의 주파수를 가진다.

따라서 채집률은 8000이다.

Bit rate = sampling rate \* number of bits per sample 이므로

**8000 \* 8(비트 수) = 64,000bps = 64kbps이다.**

### 4.2.2 델타 변조 (DM)

---

- PCM 의 복잡도를 낮추기 위해 개발된 기술이다.
- 직전 표본 값과의 차이점을 가진다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/7594bdc4-f736-411d-93b5-cdcf7bd43a45)

각 채집 구간마다 아날로그 신호의 값과 직전의 계단 신호 값을 비교한다.

아날로그 신호가 더 크면 디지털데이터의 다음 비트는 1이 되고, 아니면 0이된다.

위 그림에서 빨간색은 아날로그 신호이다.

처음에 아날로그 신호가 더크므로 디지털 데이터의 다음 비트가 1이 된다.

이후 계속 아날로그 신호가 높으므로 디지털 데이터 비트가 1이다가, 계단함수 신호가 역전하는 순간 그 다음 디지털데이터의 다음 비트가 0 이 되는 모습을 볼 수 있다.

### 델타 변조 구성 요소

---

- 변조기
  - 아날로그 신호를 디지털 신호로 만들기 위해 사용

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/44b5ac54-0aac-47bb-a116-ea6385dc4fc6)

- 복조기
  - 디지털 신호를 아날로그 신호로 만들기 위해 사용
  - 재생된 신호는 저대역-통과 필터를 거친다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/d7122137-488c-482d-94ed-3e43801cd845)

## 4.3 전송 방식 ( Transmission Mode)

---

링크를 이용한 2진 데이터의 전소은 **직렬** 혹은 **병렬** 방식으로 할 수 있다.

- 병렬 : 다중 비트를 각 클록마다 보낼 수 있다.
- 직렬 : 각 클록마다 1비트를 보낼 수 있다. 아래의 3가지 방식으로 보낸다.
  - asynchronous
  - synchonous
  - isochronous

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/28aaf0d1-7b6f-4574-a989-1ecd12dfab29)

### 4.3.1 병렬 전송

---

- 한 번에 1개의 비트가 아닌 n개의 그룹의 비트를 전송한다.
- N 비트를 전송하기 위해 n개의 전선을 사용한다
- 장점 → 직렬 전송에 비해 n 배만큼 전송 속도가 증가한다.
- 단점 → 가격이 비싸다, 따라서 짧은 거리로 제한된다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/3baabc37-7bee-4294-a3fb-70be436473ff)

### 4.3.2 직렬 전송

---

- 한 비트가 다른 비트 위에 온다. 통신하는 두 장치 간 하나의 채널만 필요하다.
- 장점 → 하나의 통신 채널만 가지므로 병렬 전송에 비해 1/n 만큼 비용이 절감된다.
- 장치 내 통신은 병렬로 구성된다.
  - 송신자와 전선 사이 ( 병렬 - 직렬) 및 전선과 수신자 (직렬 - 병렬) 사이의 인터페이스에서 변환장치가 필요하다.
- 비동기식 또는 동기식으로 구성된다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/a4e62d91-f31c-4408-9fca-5b9e36439954)

### 비동기식 전송 (Asynchrocnous)

---

- 신호의 타이밍을 중요시 하지 않는다.
- 정보 교환은 합의된 패턴으로 수신 및 변환한다.
- 보통 8 비트인 각 그룹은 링크를 따라 한 단위로 전송한다.
- 보통 0인 시작 비트를 바이트 시작 부분에 추가한다.
- 바이트 끝에 끝임을 알리는 보통 1로 구성되는 정지 비트를 추가한다.
- 총 8개의 데이터 비트와 2개의 추가 비트로 구성된다.
- 수신 장치는 각 수신 바이트마다 재동기화 된다.
- 수신자는 시작 비트를 수신 후 수신되는 비트 수를 세면서 n비트를 수신 후 정지 비트를 찾고, 그 후 모든 펄스를 무시한다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/3df32847-921c-4b87-828f-4e605730b179)

비동기식이란 **“바이트 수준에서 비동기”** 를 의미한다.

비트들은 여전히 동기화 되고 비트들의 지속 시간은 동일하다.

### 동기식 전송 (Synchronous)

---

- 다수위 바이트로 구성바이트와 다음 바이트 사이의 간격이 없음
- 수신자가 복호화를 위한 바이트를 비트로 분리한다.
- 수신자는 수신된 바이트를 8비트 단위의 그룹으로 분리한다.
- 장점
  - 비동기식에 비해 속도가 빠르다
  - 고속 응용에 유리하다
  - 데이터 링크 게층에서 이루어진다.

![image](https://github.com/JUNOSHON/C-ForAlgorithm/assets/67476544/c1c01b97-0fb7-4922-ab53-2f5f9e1caf12)

### 등시식 전송 (Isochronous transmission)

---

- 전체 비트 스트림의 동기화로 정해진 시간에 데이터의 도착을 보장한다.
  - 실시간 음성이나 화상 전송
  - 문자들 사이의 동기화로는 안되고, 전체 비트 스트림이 동기화 되어야 한다.
